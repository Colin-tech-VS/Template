{% extends "admin/base_admin.html" %}

{% block title %}Peintures - Admin{% endblock %}

{% block admin_content %}

<!-- PAGE HEADER -->
<div class="admin-page-header">
    <div class="admin-page-header-left">
        <h2 class="admin-page-title">ğŸ–¼ï¸ Peintures</h2>
        <p class="admin-page-subtitle">{{ paintings|length }} peinture{{ 's' if paintings|length > 1 else '' }} en total</p>
    </div>
    <div class="admin-page-actions">
        <a href="{{ url_for('add_painting_web') }}" class="admin-btn admin-btn-primary">+ Ajouter une peinture</a>
    </div>
</div>

<!-- PAINTINGS GRID -->
{% if paintings %}
<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px;">
    {% for painting in paintings %}
    <div class="admin-card" style="padding: 0; overflow: hidden; display: flex; flex-direction: column;">
        <!-- IMAGE -->
        <div style="position: relative; width: 100%; padding-bottom: 100%; overflow: hidden; background: #f0f0f0;">
            <img src="{{ url_for('static', filename=painting.image) }}" alt="{{ painting.name }}" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
            
            <!-- HOVER OVERLAY -->
            <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); display: flex; gap: 8px; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s ease;" class="painting-overlay">
                <a href="{{ url_for('edit_painting', painting_id=painting.id) }}" class="admin-btn admin-btn-primary" style="padding: 8px 12px; font-size: 0.85rem;">âœï¸ Ã‰diter</a>
                <form method="POST" action="{{ url_for('delete_painting', painting_id=painting.id) }}" style="display: inline;" onsubmit="return confirm('ÃŠtes-vous sÃ»r ?');">
                    <button type="submit" class="admin-btn admin-btn-danger" style="padding: 8px 12px; font-size: 0.85rem;">ğŸ—‘ï¸ Supprimer</button>
                </form>
            </div>
        </div>
        
        <!-- INFO -->
        <div style="padding: 16px; flex: 1; display: flex; flex-direction: column;">
            <h3 style="margin: 0 0 8px 0; color: var(--color-text); font-size: 1rem; line-height: 1.3; font-weight: 600;">{{ painting.name }}</h3>
            
            <div style="display: flex; gap: 8px; margin-bottom: 12px; flex-wrap: wrap;">
                <span class="admin-badge admin-badge-primary">ğŸ’° {{ painting.price }} â‚¬</span>
                <span class="admin-badge {% if painting.quantity > 0 %}admin-badge-success{% else %}admin-badge-danger{% endif %}">
                    ğŸ“¦ {{ painting.quantity }} {% if painting.quantity <= 1 %}unitÃ©{% else %}unitÃ©s{% endif %}
                </span>
            </div>
            
            <p style="margin: 0; font-size: 0.75rem; color: #9ca3af; font-family: monospace;">ID: #{{ painting.id }}</p>
        </div>
    </div>
    {% endfor %}
</div>

<style>
.painting-overlay:hover {
    opacity: 1;
}
</style>

{% else %}
<div class="admin-empty-state">
    <div class="admin-empty-icon">ğŸ–¼ï¸</div>
    <h3 class="admin-empty-title">Aucune peinture</h3>
    <p class="admin-empty-message">Commencez par en ajouter une nouvelle</p>
    <a href="{{ url_for('add_painting_web') }}" class="admin-btn admin-btn-primary" style="margin-top: 16px;">+ Ajouter une peinture</a>
</div>
{% endif %}

{% endblock %}
