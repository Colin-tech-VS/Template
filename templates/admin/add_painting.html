{% extends "admin/base_admin.html" %}

{% block title %}Ajouter une peinture - Admin{% endblock %}

{% block admin_content %}

<!-- PAGE HEADER -->
<div class="admin-page-header">
    <div class="admin-page-header-left">
        <h2 class="admin-page-title">üñºÔ∏è Ajouter une peinture</h2>
        <p class="admin-page-subtitle">Cr√©ez un nouveau produit dans votre galerie</p>
    </div>
    <div class="admin-page-actions">
        <a href="{{ url_for('admin_paintings') }}" class="admin-btn admin-btn-secondary">‚Üê Retour</a>
    </div>
</div>

<!-- FORM CONTAINER -->
<div class="admin-card">

            <form method="POST" enctype="multipart/form-data" class="admin-form">
                <!-- IMAGES -->
                <div class="form-section">
                    <h3>üñºÔ∏è Images</h3>
                    
                    <div class="form-group">
                        <label for="image">Image principale *</label>
                        <div class="file-input-wrapper" onclick="document.getElementById('image').click()">
                            <input type="file" id="image" name="image" accept="image/*" required onchange="previewImage(this, 'preview-main')">
                            <span class="file-label">üì∏ Cliquez pour t√©l√©charger</span>
                        </div>
                        <img id="preview-main" src="" alt="Aper√ßu" class="preview-img" style="display:none; max-width:300px; margin-top:15px;">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="image_2">Image 2 (optionnelle)</label>
                            <input type="file" id="image_2" name="image_2" accept="image/*" onchange="previewImage(this, 'preview-2')">
                            <img id="preview-2" src="" alt="" class="preview-img-small" style="display:none; max-width:150px; margin-top:10px;">
                        </div>

                        <div class="form-group">
                            <label for="image_3">Image 3 (optionnelle)</label>
                            <input type="file" id="image_3" name="image_3" accept="image/*" onchange="previewImage(this, 'preview-3')">
                            <img id="preview-3" src="" alt="" class="preview-img-small" style="display:none; max-width:150px; margin-top:10px;">
                        </div>

                        <div class="form-group">
                            <label for="image_4">Image 4 (optionnelle)</label>
                            <input type="file" id="image_4" name="image_4" accept="image/*" onchange="previewImage(this, 'preview-4')">
                            <img id="preview-4" src="" alt="" class="preview-img-small" style="display:none; max-width:150px; margin-top:10px;">
                        </div>
                    </div>
                </div>

                <!-- INFORMATIONS G√âN√âRALES -->
                <div class="form-section">
                    <h3>üìù Informations g√©n√©rales</h3>
                    
                    <div class="form-group">
                        <label for="name">Nom de l'≈ìuvre *</label>
                        <input type="text" id="name" name="name" placeholder="Ex: La Nuit √âtoil√©e" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="category">Cat√©gorie</label>
                            <select id="category" name="category">
                                <option value="">-- S√©lectionner --</option>
                                <option value="Abstrait">Abstrait</option>
                                <option value="Paysage">Paysage</option>
                                <option value="Portrait">Portrait</option>
                                <option value="Nature morte">Nature morte</option>
                                <option value="Moderne">Moderne</option>
                                <option value="Figuratif">Figuratif</option>
                                <option value="Contemporain">Contemporain</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="status">Statut</label>
                            <select id="status" name="status">
                                <option value="">-- S√©lectionner --</option>
                                <option value="Disponible" selected>Disponible</option>
                                <option value="Vendu">Vendu</option>
                                <option value="R√©serv√©">R√©serv√©</option>
                                <option value="Exposition">En exposition</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="price">Prix (‚Ç¨) *</label>
                            <input type="number" id="price" name="price" placeholder="150" min="0" step="0.01" required>
                        </div>

                        <div class="form-group">
                            <label for="quantity">Quantit√© en stock *</label>
                            <input type="number" id="quantity" name="quantity" placeholder="5" min="0" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="description">Description courte</label>
                        <textarea id="description" name="description" placeholder="Courte description pour les aper√ßus..." rows="3"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="description_long">Description d√©taill√©e</label>
                        <textarea id="description_long" name="description_long" placeholder="Description compl√®te de l'≈ìuvre..." rows="6"></textarea>
                    </div>
                </div>

                <!-- CARACT√âRISTIQUES TECHNIQUES -->
                <div class="form-section">
                    <h3>üé® Caract√©ristiques techniques</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="dimensions">Dimensions</label>
                            <input type="text" id="dimensions" name="dimensions" placeholder="Ex: 50x70 cm">
                        </div>

                        <div class="form-group">
                            <label for="technique">Technique</label>
                            <input type="text" id="technique" name="technique" placeholder="Ex: Huile sur toile">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="year">Ann√©e</label>
                            <input type="text" id="year" name="year" placeholder="Ex: 2024">
                        </div>

                        <div class="form-group">
                            <label for="weight">Poids</label>
                            <input type="text" id="weight" name="weight" placeholder="Ex: 2 kg">
                        </div>
                    </div>
                </div>

                <!-- OPTIONS SP√âCIALES -->
                <div class="form-section">
                    <h3>‚≠ê Options sp√©ciales</h3>
                    
                    <div class="form-group checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="unique_piece" value="1">
                            <span>üéØ Pi√®ce unique</span>
                        </label>
                    </div>

                    <div class="form-group checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="certificate" value="1">
                            <span>üìú Avec certificat d'authenticit√©</span>
                        </label>
                    </div>

                    <div class="form-group checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="framed" value="1">
                            <span>üñºÔ∏è Encadr√©e</span>
                        </label>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-primary">üé® Ajouter la peinture</button>
                    <a href="{{ url_for('admin_paintings') }}" class="btn-secondary">Annuler</a>
                </div>
            </form>

            <div class="admin-alert admin-alert-info" style="margin-top: 20px;">
                <div class="admin-alert-icon">‚ÑπÔ∏è</div>
                <div class="admin-alert-content">
                    <h3 class="admin-alert-title">Conseils pour ajouter une peinture</h3>
                    <ul style="margin: 8px 0 0 0; padding-left: 20px;">
                        <li>‚úÖ Format accept√©s : JPG, PNG, GIF</li>
                        <li>üìê Taille recommand√©e : minimum 500x500 pixels</li>
                        <li>üì¶ Poids maximum : 5 MB par image</li>
                        <li>üé® Les caract√©ristiques d√©taill√©es aident les clients</li>
                        <li>‚≠ê Les options sp√©ciales augmentent la valeur per√ßue</li>
                    </ul>
                </div>
            </div>
        </div>


<script>
function previewImage(input, previewId) {
    const preview = document.getElementById(previewId);
    const file = input.files[0];
    if(file){
        const reader = new FileReader();
        reader.onload = e => {
            preview.src = e.target.result;
            preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
    }
}
</script>

<style>
/* SECTIONS */
.form-section {
    background: white;
    padding: 30px;
    border-radius: 12px;
    margin-bottom: 25px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.form-section h3 {
    font-size: 20px;
    font-weight: 600;
    color: var(--color-primary, #1E3A8A);
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid #e5e7eb;
}

/* CHECKBOXES */
.checkbox-group {
    margin: 15px 0;
}

.checkbox-label {
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    padding: 12px;
    background: #f9fafb;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.checkbox-label:hover {
    background: #f3f4f6;
}

.checkbox-label input[type="checkbox"] {
    width: 20px;
    height: 20px;
    cursor: pointer;
}

.checkbox-label span {
    font-size: 16px;
    font-weight: 500;
    color: #374151;
}

/* IMAGES */
.preview-img-small {
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.file-input-wrapper {
    position: relative;
    border: 2px dashed var(--color-primary, #1E3A8A);
    border-radius: 8px;
    padding: 30px 20px;
    text-align: center;
    background: #f9f9f9;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100px;
}

.file-input-wrapper:hover { 
    background: #f0f4f8; 
    border-color: var(--color-secondary, #3B65C4); 
}

.file-input-wrapper input { 
    display: none; 
}

.file-label { 
    color: var(--color-primary, #1E3A8A); 
    font-weight: 600; 
    font-size: 14px; 
    cursor: pointer; 
}

.preview-img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

/* SELECT */
select {
    width: 100%;
    padding: 12px;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    font-size: 14px;
    color: #374151;
    background: white;
    cursor: pointer;
}

select:focus {
    outline: none;
    border-color: var(--color-primary, #1E3A8A);
    box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
}
</style>

{% endblock %}
