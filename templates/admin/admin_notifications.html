{% extends "admin/base_admin.html" %}

{% block title %}Notifications - Admin{% endblock %}

{% block admin_content %}

<!-- PAGE HEADER -->
<div class="admin-page-header">
    <div class="admin-page-header-left">
        <h2 class="admin-page-title">üîî Notifications</h2>
        <p class="admin-page-subtitle">{{ notifications|length }} notification{{ 's' if notifications|length > 1 else '' }}</p>
    </div>
</div>

<!-- NOTIFICATIONS LIST -->
{% if notifications %}
<div class="admin-card">
    <div class="admin-table-container">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Message</th>
                    <th>Date</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for notif in notifications %}
                <tr style="background: {% if notif[3] == 0 %}#f0f4ff{% else %}white{% endif %};">
                    <td><strong>#{{ notif[0] }}</strong></td>
                    <td style="color: {% if notif[3] == 0 %}var(--color-text){% else %}var(--color-text-secondary){% endif %}; font-weight: {% if notif[3] == 0 %}600{% else %}400{% endif %};">{{ notif[1] }}</td>
                    <td style="font-size: 0.9rem; color: #6b7280;">{{ notif[4] }}</td>
                    <td>
                        {% if notif[3] == 0 %}
                        <span class="admin-badge admin-badge-warning">‚ö†Ô∏è Non lu</span>
                        {% else %}
                        <span class="admin-badge admin-badge-success">‚úÖ Lu</span>
                        {% endif %}
                    </td>
                    <td>
                        <div style="display: flex; gap: 8px;">
                            {% if notif[3] == 0 %}
                            <a href="{{ url_for('mark_notification_read', notif_id=notif[0]) }}" class="admin-btn admin-btn-secondary" style="padding: 6px 12px; font-size: 0.85rem;">Marquer lu</a>
                            {% endif %}
                            {% if notif[2] %}
                            <a href="{{ notif[2] }}" class="admin-btn admin-btn-primary" style="padding: 6px 12px; font-size: 0.85rem;" target="_blank">Voir ‚Üí</a>
                            {% endif %}
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% else %}
<div class="admin-empty-state">
    <div class="admin-empty-icon">üîî</div>
    <h3 class="admin-empty-title">Aucune notification</h3>
    <p class="admin-empty-message">Tout est √† jour</p>
</div>
{% endif %}

{% endblock %}
